https://docs.oracle.com/en/java/javase/25/docs/specs/man/java.html#advanced-options-for-java

Graalvm:
https://www.graalvm.org/latest/reference-manual/compiler/operations/
-Djdk.graal.CompilerConfiguration=enterprise
-Djdk.graal.OptDuplication=true
-Djdk.graal.TuneInlinerExploration=1
-Djdk.graal.Vectorization=true
-XX:+UseJVMCICompiler
-XX:+UnlockExperimentalVMOptions
-XX:+UseGraalJIT
# maybe
-Djdk.graal.OptimizeLongJumps=true

https://docs.oracle.com/en/java/javase/25/gctuning/garbage-first-garbage-collector-tuning.html
G1:
-XX:+UseStringDeduplication
-XX:+AlwaysPreTouch
-Xlog:async
-XX:+UseLargePages 
-XX:+UseTransparentHugePages
-XX:+ParallelRefProcEnabled
-XX:+G1PeriodicGCInvokesConcurrent
-XX:+DisableExplicitGC
-XX:+UseCompressedOops
-XX:+UseCompressedClassesPointers
-XX:+UseCompactObjectHeaders
-XX:+CompressedClassSpaceSize
-XX:+CompactStrings
-XX:+TieredCompilation
-XX:+ExplicitGCInvokesConcurrent
-XX:+UseStringDeduplication -XX:StringDeduplicationAgeThreshold=2 vs 3

-XX:+UseLargePages 
-XX:+UseTransparentHugePages
vs
-XX:+UseLargePages 
echo 4096 | sudo tee /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages

echo madvise | sudo tee /sys/kernel/mm/transparent_hugepage/enabled

echo advise | sudo tee/sys/kernel/mm/transparent_hugepage/shmem_enabled

-XX:AllocatePrefetchInstr=2

-XX:AllocatePrefetchStyle=2 vs -XX:AllocatePrefetchStyle=3
-XX:CICompilerCount="$(nproc)" vs -XX:CICompilerCount="$(nproc --ignore=1)"
-XX:AllocatePrefetchStepSize
-XX:AllocatePrefetchLines
-XX:AllocatePrefetchDistance
-XX:AllocateInstancePrefetchLines
-XX:CompileThresholdScaling
-XX:-DoEscapeAnalysis
-XX:+BackgroundCompilation
-XX:InlineSmallCode=1000 vs -XX:InlineSmallCode=2000
-XX:FreqInlineSize
-XX:MaxInlineSize
-XX:C1MaxInlineSize
-XX:MaxTrivialSize
-XX:C1MaxTrivialSize
-XX:MaxNodeLimit
-XX:NonNMethodCodeHeapSize
-XX:NonProfiledCodeHeapSize
-XX:+TieredCompilation
-XX:+SegmentedCodeCache
-XX:ReservedCodeCacheSize
-XX:+UseFMA
-XX:+UseAESIntrinsics -XX:+UseAESCTRIntrinsics
-XX:+UseSHA -XX:+UseSHA1Intrinsics -XX:-UseSHA256Intrinsics -XX:-UseSHA512Intrinsics
-XX:+UseCMoveUnconditionally -XX:+UseCondCardMark
-XX:LoopStripMiningIter=1000 vs 1500
-XX:+DisableAttachMechanism
-XX:-UsePerfData
-XX:+AggressiveHeap
-XX:+AlwaysPreTouch
-XX:+DisableExplicitGC
-XX:MaxHeapFreeRatio=10 -XX:MinHeapFreeRatio=5
-XX:ParallelGCThreads="$(nproc --ignore=1)" vs -XX:ParallelGCThreads="$(nproc)"
-Xlog:disable vs -Xlog:async
-XX:+UseNUMA
-XX:+ParallelRefProcEnabled
-XX:+UseG1GC vs -XX:+UseParallelGC vs -XX:+UseZGC



-XX:SharedArchiveFile -XX:SharedArchiveFile=<static_archive>:<dynamic_archive>
-XX:AOTCache=cachefile -XX:AOTCacheOutput=cachefile -XX:AOTConfiguration=configfile


-XX:+TrustFinalNonStaticFields -XX:+UseFastUnorderedTimeStamps --illegal-access=permit -XX:+UseTransparentHugePages -XX:LargePageSizeInBytes=2M -XX:+UseLargePages -XX:+UseCMoveUnconditionally -XX:+UseNewLongLShift -XX:+UseVectorCmov -XX:+UseXmmI2D -XX:+UseXmmI2F

# JDK tweaks: graal
-XX:+UnlockExperimentalVMOptions
-XX:+UseJVMCICompiler

-XX:+TieredStopAtLevel=4   # Tiered compilation stops at level 4 (highest optimization)
-XX:+AggressiveOpts         # Experimental optimizations
-XX:+OptimizeStringConcat   # String concatenation optimization

-XX:+UseG1GC              # Good balance throughput / latency
-XX:MaxGCPauseMillis=50   # Tune target pause
-XX:InitiatingHeapOccupancyPercent=30
-XX:ParallelGCThreads=8
-XX:+UseStringDeduplication
-XX:ConcGCThreads=4
-Xms12G -Xmx12G
-XX:CompileThreshold=500


# Eclipse Temurin:
-XX:+UseG1GC
-XX:MaxGCPauseMillis=50
-XX:+UseStringDeduplication
-XX:ParallelGCThreads=8
-XX:ConcGCThreads=4
-XX:+TieredCompilation
-XX:+AggressiveOpts
-XX:CompileThreshold=1000    # Lower threshold for faster hotspot compilation
-XX:MaxInlineSize=32

-XX:+OptimizeStringConcat

-Xshare:dump
-Xshare:on

-Dfile.encoding=UTF-8


Disable verbose GC logs: 
-Xlog:gc*:file=/dev/null -Xlog:safepoint*:file=/dev/null
Disable assertions:
-da

paru -S graalvm-ce-java21-bin
paru -S temurin17-jdk

export JAVA_GRAALVM=/usr/lib/graalvm-ce-java21
export JAVA_TEMURIN=/usr/lib/jvm/temurin-17
alias use-graalvm='export JAVA_HOME=$JAVA_GRAALVM && export PATH=$JAVA_HOME/bin:$PATH'
alias use-temurin='export JAVA_HOME=$JAVA_TEMURIN && export PATH=$JAVA_HOME/bin:$PATH'


java -XX:ArchiveClassesAtExit=classes.jsa -cp server.jar 
java -XX:SharedArchiveFile=classes.jsa -cp server.jar
or
java -XX:+AutoCreateSharedArchive -XX:SharedArchiveFile=classes.jsa -cp

native-image -O3 -march=native --pgo-instrument
native-image -O3 -march=native --pgo
